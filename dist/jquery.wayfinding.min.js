/*! wayfinding - v0.4.0 - 2016-05-12
* https://github.com//wayfinding
* Copyright (c) 2016 Regents of the University of California Licensed MIT */
!function(a){"use strict";var b,c={maps:[{path:"floorplan.svg",id:"map.1"}],path:{color:"red",radius:10,speed:8,width:3},startpoint:function(){return"startpoint"},endpoint:!1,accessibleRoute:!1,defaultMap:function(){return"map.1"},loadMessage:"Loading",dataStoreCache:null,showLocation:!1,locationIndicator:{fill:"red",height:40},pinchToZoom:!1,zoomToRoute:!0,zoomPadding:25,floorChangeAnimationDelay:1250};a.fn.wayfinding=function(d,e,f){function g(a){return a.replace(/(:|\.|\[|\])/g,"\\$1")}function h(a,b,c,d){return(d-c)/d*a+c/d*b}function i(a){this.value=a,this.message=" no maps identified in collection to load",this.toString=function(){return this.value+this.message}}function j(a){this.value=a,this.message=" has duplicate map ids",this.toString=function(){return this.value+this.message}}function k(a){this.value=a,this.message=" wasn't in the list of maps",this.toString=function(){return this.value+this.message}}function l(b){var c,d,f,g=!1,h=!1;if(f=a(b).find("div").hide().end().append('<div id="WayfindingStatus" style="">'+e.loadMessage+"</div>"),!(L.length>0))throw a(f).text(e.errorMessage),new i(JSON.stringify(L));for(c=0;c<L.length;c++)for(d=c;d<L.length;d++)c!==d&&L[c].id===L[d].id&&(g=!0);if(g===!0)throw a(f).text(e.errorMessage),new j(JSON.stringify(L));for(c=0;c<L.length;c++)L[c].id===M&&(h=!0);if(h===!1)throw a(f).text(e.errorMessage),new k(M)}function m(b,c,d){var f,g,h,i,j=e.locationIndicator.height;return f=document.createElementNS("http://www.w3.org/2000/svg","g"),a(f).attr("class",d),g=document.createElementNS("http://www.w3.org/2000/svg","path"),h=document.createElementNS("http://www.w3.org/2000/svg","circle"),i="M0.075,0",i+="c-2.079-10.207-5.745-18.703-10.186-26.576c-3.295-5.84-7.111-11.23-10.642-16.894c-1.179-1.891-2.196-3.888-3.327-5.85",i+="c-2.266-3.924-4.102-8.472-3.984-14.372c0.113-5.766,1.781-10.391,4.186-14.172c3.954-6.219,10.578-11.317,19.465-12.657",i+="c7.268-1.095,14.08,0.756,18.911,3.58c3.948,2.31,7.005,5.394,9.329,9.027c2.426,3.793,4.096,8.274,4.236,14.12",i+="c0.072,2.995-0.418,5.769-1.109,8.069c-0.699,2.328-1.823,4.274-2.824,6.353c-1.953,4.06-4.4,7.777-6.857,11.498",i+="C9.954,-26.789,3.083,-15.486,0.075,0z",g.setAttribute("d",i),g.setAttribute("fill","#E81E25"),g.setAttribute("stroke","#000000"),g.setAttribute("stroke-width","3.7"),g.setAttribute("stroke-miterlimit","10"),h.setAttribute("cx","0"),h.setAttribute("cy","-63.757"),h.setAttribute("r","9.834"),f.appendChild(g),f.appendChild(h),f.setAttribute("transform","translate("+b+" "+(c-10*(j/125))+") scale("+j/125+")"),f}function n(a,b){return a.x!==b.x?a.x-b.x:a.y!==b.y?a.y-b.y:a.id-b.id}function o(c,d){b.doors[c]=[],a("#Doors line",d).each(function(){var d={};d.floor=c,d.x1=parseInt(a(this).attr("x1")),d.x1Float=parseFloat(a(this).attr("x1")),d.y1=parseInt(a(this).attr("y1")),d.y1Float=parseFloat(a(this).attr("y1")),d.x2=parseInt(a(this).attr("x2")),d.x2Float=parseFloat(a(this).attr("x2")),d.y2=parseInt(a(this).attr("y2")),d.y2Float=parseFloat(a(this).attr("y2")),d.doorId=a(this).attr("id").split("_")[0],d.id=b.doors[c].length,d.paths=[],d.doors=[],d.portals=[],b.doors[c].push(d),R.queue({x:d.x1,y:d.y1,id:b.doors[c].length-1,type:"doors"}),R.queue({x:d.x2,y:d.y2,id:b.doors[c].length-1,type:"doors"})})}function p(c,d){b.paths[c]=[],a("#Paths line",d).each(function(){var d={};d.floor=c,d.x1=parseInt(a(this).attr("x1")),d.x1Float=parseFloat(a(this).attr("x1")),d.y1=parseInt(a(this).attr("y1")),d.y1Float=parseFloat(a(this).attr("y1")),d.x2=parseInt(a(this).attr("x2")),d.x2Float=parseFloat(a(this).attr("x2")),d.y2=parseInt(a(this).attr("y2")),d.y2Float=parseFloat(a(this).attr("y2")),d.length=Math.sqrt(Math.pow(d.x2Float-d.x1Float,2)+Math.pow(d.y2Float-d.y1Float,2)),d.pathId=b.paths[c].length,d.id=b.paths[c].length,d.paths=[],d.doors=[],d.portals=[],b.paths[c].push(d),R.queue({x:d.x1,y:d.y1,id:b.paths[c].length-1,type:"paths"}),R.queue({x:d.x2,y:d.y2,id:b.paths[c].length-1,type:"paths"})})}function q(c,d){b.portals[c]=[],a("#Portals line",d).each(function(){var d={};d.floor=c,d.x1=parseInt(a(this).attr("x1")),d.x1Float=parseFloat(a(this).attr("x1")),d.y1=parseInt(a(this).attr("y1")),d.y1Float=parseFloat(a(this).attr("y1")),d.x2=parseInt(a(this).attr("x2")),d.x2Float=parseFloat(a(this).attr("x2")),d.y2=parseInt(a(this).attr("y2")),d.y2Float=parseFloat(a(this).attr("y2")),d.paths=[],d.doors=[],d.portals=[],d.id=b.portals[c].length;var e=a(this).attr("id").split("_")[0].split(".");d.portalId=e[0]+"."+e[1];var f=T[e[2]];void 0===f&&(f=-1),d.toFloor=parseInt(f),d.accessible=!1,d.match=-1,"Elev"===e[0]&&(d.accessible=!0),d.length=Math.sqrt(Math.pow(d.x2Float-d.x1Float,2)+Math.pow(d.y2Float-d.y1Float,2)),b.portals[c].push(d),R.queue({x:d.x1,y:d.y1,id:b.portals[c].length-1,type:"portals"}),R.queue({x:d.x2,y:d.y2,id:b.portals[c].length-1,type:"portals"})})}function r(c){function d(c,d){a.each(c,function(e,f){a.each(c,function(a,c){e!==a&&b[f.type][d][f.id][c.type].push(c.id)})})}if(0!==R.length){for(var e=R.dequeue(),f=[e],g=e;R.length>0;){var h=R.dequeue();g.x===h.x&&g.y===h.y?f.push(h):(d(f,c),f=[h]),g=h}d(f,c)}}function s(){a.each(b.portals,function(c,d){a.each(d,function(c,d){-1===d.match&&-1!==d.toFloor&&a.each(b.portals[d.toFloor],function(a,b){b.portalId===d.portalId&&b.toFloor===d.floor&&(d.match=b.id,b.match=d.id)})})})}function t(){return b={doors:[],paths:[],portals:[]},a.each(L,function(a,b){R=new PriorityQueue({comparator:n}),o(a,b.el),p(a,b.el),q(a,b.el),r(a)}),s(),b}function u(c){if(e.dataStoreCache){if("object"==typeof e.dataStoreCache)b=e.dataStoreCache,"function"==typeof c&&c();else if("string"==typeof e.dataStoreCache){var d=e.dataStoreCache+N+(e.accessibleRoute?".acc":"")+".json";a.getJSON(d,function(a){b=a,"function"==typeof c&&c()}).fail(function(){b=t(),"function"==typeof c&&c()})}}else b=t(),"function"==typeof c&&c()}function v(b,c){var d,f,h,i,j;if(a("g.startPin",c).remove(),e.startpoint=b,N="function"==typeof e.startpoint?e.startpoint():e.startpoint,e.showLocation){d=a("#Doors #"+g(N),c);var k=c.children().has(a("#"+g(N)));if(f=a("svg",k).children().last(),!d.length)return;h=(Number(d.attr("x1"))+Number(d.attr("x2")))/2,i=(Number(d.attr("y1"))+Number(d.attr("y2")))/2,j=m(h,i,"startPin"),f.after(j)}}function w(b,c){var d,f,h,i,j;if(a("g.destinationPin",c).remove(),e.showLocation){if(d=a("#Doors #"+g(b),c),f=a("svg").has('#Rooms a[id="'+g(b)+'"]'),!d.length)return;h=(Number(d.attr("x1"))+Number(d.attr("x2")))/2,i=(Number(d.attr("y1"))+Number(d.attr("y2")))/2,j=m(h,i,"destinationPin"),f.append(j)}}function x(b){var d=b.data("wayfinding:options");Q=b.data("wayfinding:drawing"),e=a.extend(!0,{},c,e),e=void 0!==d?d:a.extend(!0,{},c,e),e=a.metadata?a.extend(!0,{},e,b.metadata()):e,L=e.maps,M="function"==typeof e.defaultMap?e.defaultMap():e.defaultMap,N="function"==typeof e.startpoint?e.startpoint():e.startpoint}function y(a){a.data("wayfinding:options",e),a.data("wayfinding:drawing",Q),a.data("wayfinding:data",b)}function z(b){var c=a(b).find("svg"),d=parseInt(a(c).attr("height").replace("px","").split(".")[0],10),e=parseInt(a(c).attr("width").replace("px","").split(".")[0],10);d=2*Math.ceil(d/2),e=2*Math.ceil(e/2),a(b).css("padding-bottom",100*(d/e)+"%"),c.attr("height","100%").attr("width","100%").attr("preserveAspectRatio","xMinYMin meet"),a("#Rooms a, #Doors line",b).each(function(){if(a(this).prop("id")&&a(this).prop("id").indexOf("_")>0){var b=a(this).prop("id");a(this).prop("id",b.slice(0,b.indexOf("_")))}})}function A(a){a.panzoom({minScale:1,contain:"invert",cursor:"pointer"}),a.find("a").on("mousedown touchstart",function(a){a.stopImmediatePropagation()})}function B(b,c){a(c).hide(),a("#Paths line",c).attr("stroke-opacity",0),a("#Doors line",c).attr("stroke-opacity",0),a("#Portals line",c).attr("stroke-opacity",0);var d=a("#Paths",c).parent();d.is("g")&&d.attr("opacity",0).attr("display","inline"),a("#Rooms a",c).click(function(c){a(b).trigger("wayfinding:roomClicked",[{roomId:a(this).attr("id")}]),a(b).wayfinding("routeTo",a(this).prop("id")),c.preventDefault()}),a(c).find("*").css("pointer-events","none"),a("#Rooms a",c).find("*").css("pointer-events","auto"),a(b).append(c),e.pinchToZoom&&A(a(c))}function C(b,c){var d=a(c).height();a(c).height(d),a("div",c).hide(),a("#"+b,c).show(0,function(){a(c).trigger("wayfinding:floorChanged",{mapId:b})});var f,g,h,i;if(Q){for(h=-1,f=0;f<L.length;f++)if(L[f]===b){h=f;break}for(g=-1,f=0;f<Q.length;f++)if(Q[f].floor===h){g=f;break}-1!==g&&(i=Q[g].routeLength,a(Q[g].path,c).attr("stroke-dasharray",[i,i]),a(Q[g].path,c).attr("stroke-dashoffset",i),a(Q[g].path,c).attr("pathLength",i),a(Q[g].path,c).attr("stroke-dashoffset",i),a(Q[g].path,c).animate({svgStrokeDashOffset:0},i*e.path.speed))}}function D(b){a("path[class^=directionPath]",b).css({stroke:"none"})}function E(b,c,d,e,f,g){d=parseFloat(d),e=parseFloat(e),f=parseFloat(f),g=parseFloat(g);var h=c.getAttribute("viewBox"),i=parseFloat(h.split(/\s+|,/)[0]),j=parseFloat(h.split(/\s+|,/)[1]),k=parseFloat(h.split(/\s+|,/)[2]),l=parseFloat(h.split(/\s+|,/)[3]),m=a(b).width(),n=a(b).height(),o=Math.min(k/f,l/g);a(b).panzoom("zoom",parseFloat(o));var p=m/k,q=n/l,r=i+k/2,s=j+l/2,t=(r-(d+f/2))*p,u=(s-(e+g/2))*q;a(b).panzoom("pan",t*o,u*o)}function F(b){function c(b,c,d,f,i){setTimeout(function(){var i={};i.X=h(c.X,d.X,b,f),i.Y=h(c.Y,d.Y,b,f),i.W=h(c.W,d.W,b,f),i.H=h(c.H,d.H,b,f),e.pinchToZoom?E(a(g).parent()[0],g,i.X,i.Y,i.W,i.H):g.setAttribute("viewBox",i.X+" "+i.Y+" "+i.W+" "+i.H)},b*(i/f))}function d(c,d,f,i,j){setTimeout(function(){var j={};j.X=h(f.X,d.X,c,i),j.Y=h(f.Y,d.Y,c,i),j.W=h(f.W,d.W,c,i),j.H=h(f.H,d.H,c,i),e.pinchToZoom?E(a(g).parent()[0],g,j.X,j.Y,j.W,j.H):g.setAttribute("viewBox",j.X+" "+j.Y+" "+j.W+" "+j.H),c===i&&b===Q.length&&a(K).trigger("wayfinding:animationComplete")},c*(j/i))}var f,g,i,j,k,l,m,n=e.zoomPadding,o=35,p=650,q={},r={};if(e.repeat&&b>=Q.length)setTimeout(function(){F(0)},5e3);else if(b>=Q.length)return;var s=Q[b][0].floor;if(g=a("#"+L[s].id+" svg")[0],j=Q[b].routeLength,l=j*e.path.speed,C(L[Q[b][0].floor].id,K),f=a("#"+L[Q[b][0].floor].id+" .directionPath"+b)[0],f.style.stroke=e.path.color,f.style.strokeWidth=e.path.width,f.style.transition=f.style.WebkitTransition="none",f.style.strokeDasharray=j+" "+j,f.style.strokeDashoffset=j,i=f.getBBox(),f.style.transition=f.style.WebkitTransition="stroke-dashoffset "+l+"ms linear",f.style.strokeDashoffset="0",e.zoomToRoute===!1)b===Q.length-1&&a(f).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a(K).trigger("wayfinding:animationComplete")});else for(k=g.getAttribute("viewBox"),q.X=parseFloat(k.split(/\s+|,/)[0]),q.Y=parseFloat(k.split(/\s+|,/)[1]),q.W=parseFloat(k.split(/\s+|,/)[2]),q.H=parseFloat(k.split(/\s+|,/)[3]),r.X=i.x-n>0?i.x-n:0,r.Y=i.y-n>0?i.y-n:0,r.H=i.height+2*n,r.W=i.width+2*n,m=0;o>=m;m++)c(m,q,r,o,p);setTimeout(function(){if(F(++b),e.zoomToRoute)for(m=1===Q.length||Q.length>1&&b===Q.length?0:o;o>=m;m++)d(m,q,r,o,p)},l+e.floorChangeAnimationDelay)}function G(a,c){var d=b[a.type][a.floor][a.segment],e=b[c.type][c.floor][c.segment];return e.x1===d.x1&&e.y1===d.y1||e.x1===d.x2&&e.y1===d.y2?!0:!1}function H(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B;if(e.endpoint=c,a("path[class^=directionPath]",K).remove(),a("#Rooms *.wayfindingRoom",K).removeAttr("class"),O=[],N!==c){a('#Rooms a[id="'+c+'"] g',K).attr("class","wayfindingRoom"),w(e.endpoint,d);var C=Module.pathfinding(JSON.stringify(b),N,c,e.accessibleRoute),D=!1;if(1===C.size()&&(D=!0,console.error(C.get(0))),!D){var E=C.get(C.size()-1);E=E.split("-");var H={type:"doors",floor:E[1],segment:E[2]};for(f=C.size()-2;f>0;f--){var I=C.get(f);if(I=I.split("-"),"path"===I[0])O.push({type:"paths",floor:I[1],segment:I[2]});else if("portal"===I[0]){for(var J=I[0];"portal"===J;)f--,J=C.get(f).split("-")[0];f++,I=C.get(f).split("-"),O.push({type:"portals",floor:I[1],segment:I[2]})}else console.log("Not a path or portal"),console.log(C.get(f))}for(j=0,f=0;f<O.length;f++)"portals"===O[f].type&&j++;if(Q=new Array(j),Q[0]=[],g={},0===O.length)return void console.warn("Attempting to route with no solution. This should never happen. SVG likely has errors. Destination is: "+c);G(H,O[0]);var M=b[O[0].type][O[0].floor][O[0].segment];for(G(H,O[0])?(g={},g.floor=O[0].floor,g.type="M",g.x=M.x1,g.y=M.y1,g.length=0,Q[0].push(g),g={},g.type="L",g.floor=O[0].floor,g.x=M.x2,g.y=M.y2,g.length=M.length,Q[0].push(g),Q[0].routeLength=g.length):(g={},g.type="M",g.floor=O[0].floor,g.x=M.x2,g.y=M.y2,g.length=0,Q[0].push(g),g={},g.type="L",g.floor=O[0].floor,g.x=M.x1,g.y=M.y1,g.length=M.length,Q[0].push(g),Q[0].routeLength=g.length),k=1,f=0;j+1>f;f++)for(h=k;h<O.length;h++)M=b[O[h].type][O[h].floor][O[h].segment],"paths"===O[h].type&&(l=M.x1,m=M.y1,n=M.x2,o=M.y2,g={},g.floor=O[h].floor,Q[f].slice(-1)[0].x===l&&Q[f].slice(-1)[0].y===m?(g.x=n,g.y=o):(g.x=l,g.y=m),g.length=M.length,g.type="L",Q[f].push(g),Q[f].routeLength+=g.length),"portals"===O[h].type&&(Q[f+1]=[],Q[f+1].routeLength=0,G(O[h+1],O[h])?(g={},g.floor=O[h].floor,g.type="M",g.x=M.x1,g.y=M.y1,g.length=0,Q[f+1].push(g),Q[f+1].routeLength=g.length):(g={},g.floor=O[h].floor,g.type="M",g.x=M.x2,g.y=M.y2,g.length=0,Q[f+1].push(g),Q[f+1].routeLength=g.length),k=h,k++,h=O.length);if(e.path.radius>0)for(i=0;i<Q.length;i++){for(f=1;f<Q[i].length-1;f++)"L"===Q[i][f].type&&"L"===Q[i][f].type&&(p=Q[i][f-1].x-Q[i][f].x,q=Q[i][f-1].y-Q[i][f].y,r=Q[i][f].x-Q[i][f+1].x,s=Q[i][f].y-Q[i][f+1].y,(0===q&&0===s||0===p&&0===r||p/q===r/s&&(0!==p||0!==q||0!==r||0!==s))&&(Q[i][f+1].length=Q[i][f].length+Q[i][f+1].length,Q[i].splice(f,1),f=1));for(f=1;f<Q[i].length-1;f++)"L"===Q[i][f].type&&"L"===Q[i][f].type&&Q[i][f].length>e.path.radius&&Q[i][f+1].length>e.path.radius&&(t=Q[i][f].x,u=Q[i][f].y,v=Q[i][f-1].x,x=Q[i][f-1].y,Q[i][f].x=Number(v)+(t-v)*((Q[i][f].length-e.path.radius)/Q[i][f].length),Q[i][f].y=Number(x)+(u-x)*((Q[i][f].length-e.path.radius)/Q[i][f].length),Q[i][f].length=Q[i][f].length-e.path.radius,y={},y.cx=t,y.cy=u,z=Q[i][f+1].x,A=Q[i][f+1].y,y.x=Number(t)+(z-t)*(e.path.radius/Q[i][f+1].length),y.y=Number(u)+(A-u)*(e.path.radius/Q[i][f+1].length),Q[i][f+1].length=Q[i][f+1].length-e.path.radius,y.type="Q",y.floor=Q[i][f].floor,Q[i].splice(f+1,0,y))}a.each(Q,function(b,c){var d,e="";a.each(c,function(a,b){switch(b.type){case"M":e="M"+b.x+","+b.y;break;case"L":e+="L"+b.x+","+b.y;break;case"Q":e+="Q"+b.cx+","+b.cy+" "+b.x+","+b.y}}),d=document.createElementNS("http://www.w3.org/2000/svg","path"),d.setAttribute("d",e),d.style.fill="none",d.classList?d.classList.add("directionPath"+b):d.setAttribute("class","directionPath"+b);var f=a("#"+L[c[0].floor].id+" svg"),g=a(".startPin",f),h=a(".destinationPin",f);g.length?g.before(d):h.length?h.before(d):f.append(d),B=a("#"+L[c[0].floor].id+" svg .directionPath"+b),Q[b].path=B}),F(0)}}}function I(b){var c,d;for(a("#WayfindingStatus").remove(),c=0,d=0;d<L.length;d++)M===L[d].id&&(c=d);a("#"+L[c].id,b).show(),a(b).trigger("wayfinding:mapsVisible"),"function"==typeof e.endpoint?H(e.endpoint(),b):"string"==typeof e.endpoint&&H(e.endpoint,b),a.event.trigger("wayfinding:ready")}function J(b,c){var d=0;a('div:not("#WayfindingStatus")',b).remove(),a.each(L,function(e,f){var g=a('<div id="'+f.id+'"></div>');T[f.id]=e,g.load(f.path,function(a,h){"error"===h?(g.html('<p class="text-center text-danger">Map '+e+" Was not found at "+f.path+"<br />Please upload it in the administration section</p>"),L[e].el=g):(L[e].svgHandle=a,L[e].el=g,z(L[e].el),B(b,g),d+=1),d===L.length&&u(function(){v(N,b),y(b),I(b),"function"==typeof c&&c()})})})}var K,L,M,N,O,P,Q,R,S=e,T={};return d&&"object"==typeof d&&("function"==typeof e&&(f=e),e=d,S=d,d="initialize"),this.each(function(){if(K=a(this),x(K),d&&"string"==typeof d)switch(d){case"initialize":S&&S.maps?(l(K),J(K,f)):S&&void 0!==S.showLocation&&(e.showLocation=S.showLocation,v(e.startpoint,K));break;case"routeTo":H(S,K);break;case"animatePath":D(K),F(0);break;case"startpoint":void 0===S?P=N:(v(S,K),u(f));break;case"currentMap":void 0===S?P=a("div:visible",K).prop("id"):C(S,K);break;case"accessibleRoute":void 0===S?P=e.accessibleRoute:(e.accessibleRoute=S,u(f));break;case"path":void 0===S?P=e.path:e.path=a.extend(!0,{},e.path,S);break;case"getDataStore":P=JSON.stringify(b);break;case"destroy":a(K).remove()}y(K)}),void 0!==P?P:this}}(jQuery),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.PriorityQueue=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;c=a("./PriorityQueue/AbstractPriorityQueue"),d=a("./PriorityQueue/ArrayStrategy"),f=a("./PriorityQueue/BinaryHeapStrategy"),e=a("./PriorityQueue/BHeapStrategy"),g=function(a){function b(a){a||(a={}),a.strategy||(a.strategy=f),a.comparator||(a.comparator=function(a,b){return(a||0)-(b||0)}),b.__super__.constructor.call(this,a)}return h(b,a),b}(c),g.ArrayStrategy=d,g.BinaryHeapStrategy=f,g.BHeapStrategy=e,b.exports=g},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(a,b){var c;b.exports=c=function(){function a(a){var b;if(null==(null!=a?a.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=a?a.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new a.strategy(a),this.length=(null!=a&&null!=(b=a.initialValues)?b.length:void 0)||0}return a.prototype.queue=function(a){this.length++,this.priv.queue(a)},a.prototype.dequeue=function(){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},a.prototype.peek=function(){if(!this.length)throw"Empty queue";return this.priv.peek()},a.prototype.clear=function(){return this.length=0,this.priv.clear()},a}()},{}],3:[function(a,b){var c,d;d=function(a,b,c){var d,e,f;for(e=0,d=a.length;d>e;)f=e+d>>>1,c(a[f],b)>=0?e=f+1:d=f;return e},b.exports=c=function(){function a(a){var b;this.options=a,this.comparator=this.options.comparator,this.data=(null!=(b=this.options.initialValues)?b.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return a.prototype.queue=function(a){var b;b=d(this.data,a,this.comparator),this.data.splice(b,0,a)},a.prototype.dequeue=function(){return this.data.pop()},a.prototype.peek=function(){return this.data[this.data.length-1]},a.prototype.clear=function(){this.data.length=0},a}()},{}],4:[function(a,b){var c;b.exports=c=function(){function a(a){var b,c,d,e,f,g,h,i,j;for(this.comparator=(null!=a?a.comparator:void 0)||function(a,b){return a-b},this.pageSize=(null!=a?a.pageSize:void 0)||512,this.length=0,i=0;1<<i<this.pageSize;)i+=1;if(1<<i!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=i,this._emptyMemoryPageTemplate=b=[],c=d=0,g=this.pageSize;g>=0?g>d:d>g;c=g>=0?++d:--d)b.push(null);if(this._memory=[],this._mask=this.pageSize-1,a.initialValues)for(h=a.initialValues,e=0,f=h.length;f>e;e++)j=h[e],this.queue(j)}return a.prototype.queue=function(a){this.length+=1,this._write(this.length,a),this._bubbleUp(this.length,a)},a.prototype.dequeue=function(){var a,b;return a=this._read(1),b=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,b),this._bubbleDown(1,b)),a},a.prototype.peek=function(){return this._read(1)},a.prototype.clear=function(){this.length=0,this._memory.length=0},a.prototype._write=function(a,b){var c;for(c=a>>this._shift;c>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[c][a&this._mask]=b},a.prototype._read=function(a){return this._memory[a>>this._shift][a&this._mask]},a.prototype._bubbleUp=function(a,b){var c,d,e,f;for(c=this.comparator;a>1&&(d=a&this._mask,a<this.pageSize||d>3?e=a&~this._mask|d>>1:2>d?(e=a-this.pageSize>>this._shift,e+=e&~(this._mask>>1),e|=this.pageSize>>1):e=a-2,f=this._read(e),!(c(f,b)<0));)this._write(e,b),this._write(a,f),a=e},a.prototype._bubbleDown=function(a,b){var c,d,e,f,g;for(g=this.comparator;a<this.length;)if(a>this._mask&&!(a&this._mask-1)?c=d=a+2:a&this.pageSize>>1?(c=(a&~this._mask)>>1,c|=a&this._mask>>1,c=c+1<<this._shift,d=c+1):(c=a+(a&this._mask),d=c+1),c!==d&&d<=this.length)if(e=this._read(c),f=this._read(d),g(e,b)<0&&g(e,f)<=0)this._write(c,b),this._write(a,e),a=c;else{if(!(g(f,b)<0))break;this._write(d,b),this._write(a,f),a=d}else{if(!(c<=this.length))break;if(e=this._read(c),!(g(e,b)<0))break;this._write(c,b),this._write(a,e),a=c}},a}()},{}],5:[function(a,b){var c;b.exports=c=function(){function a(a){var b;this.comparator=(null!=a?a.comparator:void 0)||function(a,b){return a-b},this.length=0,this.data=(null!=(b=a.initialValues)?b.slice(0):void 0)||[],this._heapify()}return a.prototype._heapify=function(){var a,b,c;if(this.data.length>0)for(a=b=1,c=this.data.length;c>=1?c>b:b>c;a=c>=1?++b:--b)this._bubbleUp(a)},a.prototype.queue=function(a){this.data.push(a),this._bubbleUp(this.data.length-1)},a.prototype.dequeue=function(){var a,b;return b=this.data[0],a=this.data.pop(),this.data.length>0&&(this.data[0]=a,this._bubbleDown(0)),b},a.prototype.peek=function(){return this.data[0]},a.prototype.clear=function(){this.length=0,this.data.length=0},a.prototype._bubbleUp=function(a){for(var b,c;a>0&&(b=a-1>>>1,this.comparator(this.data[a],this.data[b])<0);)c=this.data[b],this.data[b]=this.data[a],this.data[a]=c,a=b},a.prototype._bubbleDown=function(a){var b,c,d,e,f;for(b=this.data.length-1;c=(a<<1)+1,e=c+1,d=a,b>=c&&this.comparator(this.data[c],this.data[d])<0&&(d=c),b>=e&&this.comparator(this.data[e],this.data[d])<0&&(d=e),d!==a;)f=this.data[d],this.data[d]=this.data[a],this.data[a]=f,a=d},a}()},{}]},{},[1])(1)});